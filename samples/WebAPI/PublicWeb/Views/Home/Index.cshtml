@{
	ViewBag.Title = "Index";
}
<div data-ng-app="publicWeb">
	<div data-ng-controller="MainCtrl">
		<div>{{apiServer.isConnected}}</div>
		<div>
			<button data-ng-disabled="!apiServer.isConnected" data-ng-click="loadCountries()">Get Countries</button>
		</div>
		<table>
			<tr>
				<th>Name</th>
				<th>Population</th>
			</tr>
			<tr data-ng-repeat="country in countries" data-ng-click="selectCountry(country)">
				<td>{{country.Name}}</td>
				<td>{{country.Population}}</td>
			</tr>
		</table>
		<fieldset>
			<legend>SELECTED COUNTRY</legend>
			<div><input type="text" data-ng-model="selectedCountry.Name" /></div>
			<div><input type="number" data-ng-model="selectedCountry.Population" /></div>
			<button data-ng-disabled="!apiServer.isConnected" data-ng-click="saveCountry(selectedCountry)">Save</button>
		</fieldset>
		<fieldset>
			<legend>GET COUNTRY</legend>
			<div>
				<input type="number" data-ng-model="toLoad" />
			</div>
			<div>
				<button data-ng-disabled="!apiServer.isConnected" data-ng-click="loadCountry(toLoad)">Get Country</button>
			</div>
			<div>{{loadedCountry.Name}}</div>
			<div>{{loadedCountry.Population}}</div>
		</fieldset>
	</div>
</div>


@section scripts
{
	<script src="~/Scripts/jquery.signalR-2.0.0-rc1.js"></script>
	<script src="~/Scripts/rlangis.js"></script>
	<script src="~/Scripts/angular.js"></script>
	<script src="~/Scripts/angular-resource.js"></script>
	<script src="~/Scripts/App/App.js"></script>
}
